#
# ZYV
#

# Firewall configuration
firewall --enabled --ssh <%= ks_info['firewall'] %>

# Install OS instead of upgrade
install

# Use CDROM installation media
cdrom

# Root password
rootpw --plaintext default

# System authorization information
auth  --useshadow  --passalgo=sha512

# Use graphical install
graphical

# System keyboard
keyboard us

# System language
lang en_US.UTF-8

# SELinux configuration
selinux --enforcing

# Do not configure the X Window System
skipx

# Installation logging level
logging --level=info

# System timezone
timezone --isUtc Europe/Berlin

# Network information
network --bootproto=static --device=eth0 --gateway=<%= ks_info['net_gw'] %> --ip=<%= ks_info['net_ip'] %> --nameserver=<%= ks_info['net_ns'] %> --netmask=<%= ks_info['net_msk'] %> --onboot=on --noipv6 --hostname=<%= hostname %>

# System bootloader configuration
bootloader --location=mbr

# Clear the Master Boot Record
zerombr

# Partition clearing information
clearpart --all --initlabel

# Disk partitioning information
part / --asprimary --fstype="ext4" --fsoptions="relatime" --grow --ondisk=/dev/vda --size=1
part swap --asprimary --fstype="swap" --grow --ondisk=/dev/vdb --size=1

# Local repos
repo --name="<%= prefix %>-local-noarch" --baseurl="http://localhost/repos/<%= prefix %>-$releasever-local/noarch"
repo --name="<%= prefix %>-local-binary" --baseurl="http://localhost/repos/<%= prefix %>-$releasever-local/$basearch"

%packages
@core
@server-policy
bind-utils
curl
dos2unix
mc
screen
vim
wget
-ntp
-smartmontools

%post

(

# Install and enable puppet client from the internal repos
yum install puppet
chkconfig puppet on

) 2>&1 | tee /root/ks-post.log

%end
